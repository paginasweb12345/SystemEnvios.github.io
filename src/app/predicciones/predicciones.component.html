<div class="contenedor" *ngIf="!cargando; else loading">
  
  <h2 class="titulo">ğŸ“Š Panel de Predicciones y AnalÃ­tica Avanzada</h2>

  <!-- === TARJETAS PRINCIPALES === -->
  <div class="grid">
    <div class="card">
      <h3>Total de EnvÃ­os</h3>
      <p class="numero">{{ stats.totalEnvios }}</p>
    </div>

    <div class="card">
      <h3>Porcentaje de Cumplimiento</h3>
      <p class="numero">{{ stats.porcentajeCumplimiento }}%</p>
    </div>

    <div class="card">
      <h3>Promedio por DÃ­a</h3>
      <p class="numero">{{ promedioPorDia }}</p>
    </div>

    <div class="card">
      <h3>PredicciÃ³n para MaÃ±ana</h3>
      <p class="numero">{{ prediccionManana }}</p>
    </div>
  </div>

  <!-- === DETALLES AVANZADOS === -->
  <div class="grid-doble">
    
    <div class="card">
      <h3>DÃ­a con Mayor Demanda</h3>
      <p class="numero" *ngIf="diaPico">
        {{ diaPico?.fecha }} â€” {{ diaPico?.cantidad }} envÃ­os
      </p>
      <p *ngIf="!diaPico">Sin datos</p>
    </div>

    <div class="card">
      <h3>Tiempo Promedio de Entrega</h3>
      <p class="numero">{{ tiempoPromedioEntrega }} dÃ­as</p>
    </div>

    <div class="card">
      <h3>Porcentaje de Devoluciones</h3>
      <p class="numero">{{ porcentajeDevoluciones }}%</p>
    </div>

    <div class="card">
      <h3>EnvÃ­os por Estado</h3>
      <ul>
        <li>ğŸ“¦ Entregados: <span>{{ stats.entregados }}</span></li>
        <li>ğŸšš En trÃ¡nsito: <span>{{ stats.enTransito }}</span></li>
        <li>â³ Pendientes: <span>{{ stats.pendientes }}</span></li>
        <li>ğŸ” Devueltos: <span>{{ stats.devueltos }}</span></li>
      </ul>
    </div>

  </div>

  <!-- === DESTINOS FRECUENTES === -->
  <div class="card full">
    <h3>ğŸ“ Destinos MÃ¡s Frecuentes</h3>

    <p *ngIf="destinosFrecuentes.length === 0">Sin datos</p>

    <ul *ngIf="destinosFrecuentes.length > 0">
      <li *ngFor="let d of destinosFrecuentes">
        {{ d.destino }} â€” <strong>{{ d.cantidad }}</strong> envÃ­os
      </li>
    </ul>
  </div>

  <!-- === CLASIFICACIÃ“N DE COSTOS === -->
  <div class="card full">
    <h3>ğŸ’° ClasificaciÃ³n por Costos</h3>

    <ul>
      <li *ngFor="let c of costosClasificados">
        {{ c.rango }} â€” <strong>{{ c.cantidad }}</strong> envÃ­os
      </li>
    </ul>
  </div>

</div>

<!-- === LOADING === -->
<ng-template #loading>
  <div class="loading">Cargando anÃ¡lisis...</div>
</ng-template>
